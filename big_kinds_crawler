import requests
from selenium import webdriver
from urllib.request import urlopen
import time

#크롬 드라이버
driver = webdriver.Chrome('D:/r_temp/chrome/chromedriver')
driver.implicitly_wait(3)

driver.get('https://www.bigkinds.or.kr/')

#date_button=driver.find_element_by_css_selector("button#date-filter-btn")
#date_button.click()

#date_icon=driver.find_element_by_css_selector("div.datepicker-wrap")
#date_icon.click()

#검색 상자
search_box = driver.find_element_by_css_selector("input#total-search-key")
search_box.send_keys("((대한항공) OR (Korean Air Lines Co.) OR (Ltd.) OR (KAL) OR ((주)대한항공))")

#검색 버튼
search_button = driver.find_element_by_css_selector("span.input-group-btn")
search_button.click()
time.sleep(1)

#경제 버튼
detail_button= driver.find_element_by_css_selector("input#filter-category-002000000")
detail_button.click()
time.sleep(1)

text = [] #본문
for k in range(1,2):
    for j in range(2,9):
        for i in range(1,11):
            head_button = driver.find_element_by_css_selector("#news-results > div:nth-child({}) > div.news-item__body > h4".format(i))
            driver.implicitly_wait(15)
            head_button.click()
            time.sleep(1)
            T = driver.find_element_by_css_selector("#news-detail-modal > div > div > div.modal-body > div")
            text.append(T.text)
            driver.implicitly_wait(15)
            time.sleep(1)
            close_button = driver.find_element_by_css_selector("#news-detail-modal > div > div > div.modal-footer > button")
            driver.implicitly_wait(15)
            close_button.click()
            time.sleep(1)
        page_bar = driver.find_elements_by_css_selector("#news-results-pagination > ul > li:nth-child({}) > a".format(j+2))
        for number in page_bar:
            number.click()
            time.sleep(2)
            